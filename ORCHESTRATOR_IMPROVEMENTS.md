# –£–ª—É—á—à–µ–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## 1. –£–ø—Ä–æ—â–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π

### –ü—Ä–æ–±–ª–µ–º–∞
–ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–º–µ–ª–∞ —Ä–∞–∑–º—ã—Ç—É—é –ª–æ–≥–∏–∫—É –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π —Å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏:

- **`should_stop()`** - –≤—ã–∑—ã–≤–∞–ª—Å—è –∫–∞–∂–¥—ã–µ `monitoring_interval` —Å –Ω–æ–≤—ã–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏
- **`decide()`** - –≤—ã–∑—ã–≤–∞–ª—Å—è –∫–∞–∂–¥—ã–µ `get_wait_time()` —Å–æ —Å—Ç–∞—Ä—ã–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏ –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏
- –î–≤–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö —Ç–∞–π–º–µ—Ä–∞ —Å–æ–∑–¥–∞–≤–∞–ª–∏ –ø—É—Ç–∞–Ω–∏—Ü—É
- –ú–µ—Ç—Ä–∏–∫–∏ –¥–æ–±–∞–≤–ª—è–ª–∏—Å—å –≤ –∏—Å—Ç–æ—Ä–∏—é –¥–≤–∞–∂–¥—ã
- –ù–µ—è—Å–Ω–æ, –≥–¥–µ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ —É—Å–ª–æ–≤–∏–π

### –†–µ—à–µ–Ω–∏–µ
–ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ü–∏–∫–ª–∞ –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π:

```python
def _running_phase(self) -> None:
    """–ì–ª–∞–≤–Ω—ã–π —Ü–∏–∫–ª: —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫ –∏ –ø—Ä–∏–Ω—è—Ç–∏–µ —Ä–µ—à–µ–Ω–∏–π"""
    next_monitor_time = time.time()
    next_change_time = time.time()  # –í—Ä–µ–º—è —Å–ª–µ–¥—É—é—â–µ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏

    while self.state == State.RUNNING:
        time.sleep(1)
        now = time.time()

        # –°–æ–±–∏—Ä–∞–µ–º –º–µ—Ç—Ä–∏–∫–∏ –∏ –ø—Ä–∏–Ω–∏–º–∞–µ–º —Ä–µ—à–µ–Ω–∏—è –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
        if now >= next_monitor_time:
            metrics = self.adapter.get_stats()
            self.history.append(metrics)

            # –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —É—Å–ª–æ–≤–∏—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞
            if self._check_critical_conditions(metrics):
                self.state = State.FINISHED
                self.stop_reason = StopReason.DEGRADATION
                break

            # –°—Ç—Ä–∞—Ç–µ–≥–∏—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ—à–µ–Ω–∏–µ –ü–†–ò –ö–ê–ñ–î–û–ú –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–µ
            decision = self.strategy.decide(metrics)

            if decision == Decision.STOP:
                self.state = State.FINISHED
                self.stop_reason = StopReason.TARGET_REACHED
                break

            # –ò–∑–º–µ–Ω—è—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø—Ä–∏—à–ª–æ –≤—Ä–µ–º—è –∏ —Ä–µ—à–µ–Ω–∏–µ CONTINUE
            if decision == Decision.CONTINUE and now >= next_change_time:
                next_users = self.strategy.get_next_users(self.current_users, metrics)
                self.adapter.configure(
                    user_count=next_users,
                    spawn_rate=self.config.orchestrator.spawn_rate
                )
                self.current_users = next_users
                next_change_time = now + self.strategy.get_wait_time()

            # HOLD - –ø—Ä–æ—Å—Ç–æ –Ω–µ –º–µ–Ω—è–µ–º –Ω–∞–≥—Ä—É–∑–∫—É

            next_monitor_time = now + self.config.orchestrator.monitoring_interval
```

### –ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

1. **–£–±—Ä–∞–Ω –º–µ—Ç–æ–¥ `should_stop()`** –∏–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ `IStrategy`
2. **`decide()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–µ** —Å –Ω–æ–≤—ã–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏
3. **`get_wait_time()` –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏**, –∞ –Ω–µ —á–∞—Å—Ç–æ—Ç—É –ø—Ä–æ–≤–µ—Ä–æ–∫
4. **–û–¥–∏–Ω –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã** - –≤—Å—è –ª–æ–≥–∏–∫–∞ –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π –≤ `decide()`

### –ù–æ–≤–∞—è —Å–µ–º–∞–Ω—Ç–∏–∫–∞ –º–µ—Ç–æ–¥–æ–≤:

- **`decide(metrics)`** - –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ `monitoring_interval` —Å–µ–∫—É–Ω–¥:
  - –û–±–Ω–æ–≤–ª—è–µ—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
  - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —É—Å–ª–æ–≤–∏—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏/–ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è
  - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `CONTINUE`, `HOLD` –∏–ª–∏ `STOP`

- **`get_wait_time()`** - –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–∞–∫ —á–∞—Å—Ç–æ –º–µ–Ω—è—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É:
  - DegradationSearch: 30 —Å–µ–∫ (–≤—Ä–µ–º—è —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏)
  - Spike: 1 —Å–µ–∫ (–±—ã—Å—Ç—Ä–∞—è —Å–º–µ–Ω–∞ —Ñ–∞–∑)
  - StepLoad: `step_duration` (–¥–µ—Ä–∂–∞—Ç—å —Å—Ç—É–ø–µ–Ω—å)

- **`get_next_users(current, metrics)`** - –≤—ã—á–∏—Å–ª—è–µ—Ç —Å–ª–µ–¥—É—é—â—É—é –Ω–∞–≥—Ä—É–∑–∫—É

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:

‚úÖ –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
‚úÖ –ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –º–µ—Ç—Ä–∏–∫ –≤ –∏—Å—Ç–æ—Ä–∏–∏
‚úÖ –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ - –ª–µ–≥—á–µ –ø–æ–Ω—è—Ç—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å
‚úÖ –°—Ç—Ä–∞—Ç–µ–≥–∏—è –≤—Å–µ–≥–¥–∞ –ø–æ–ª—É—á–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏
‚úÖ –ì–∏–±–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏

---

## 2. –°–∫–æ–ª—å–∑—è—â–µ–µ –æ–∫–Ω–æ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–∏

### –ü—Ä–æ–±–ª–µ–º–∞
–ï–¥–∏–Ω–∏—á–Ω–æ–µ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ø–æ—Ä–æ–≥–∞ –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –ª–æ–∂–Ω—ã–º —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–µ–º:

- –í—Ä–µ–º–µ–Ω–Ω—ã–π –≤—Å–ø–ª–µ—Å–∫ –Ω–∞–≥—Ä—É–∑–∫–∏
- –°–µ—Ç–µ–≤—ã–µ —Ñ–ª—É–∫—Ç—É–∞—Ü–∏–∏
- –°–±–æ—Ä–∫–∞ –º—É—Å–æ—Ä–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
- –ò–Ω–¥–µ–∫—Å SDI —É—á–∏—Ç—ã–≤–∞–µ—Ç —Å–ø–∞–π–∫–∏, —á—Ç–æ –º–æ–∂–µ—Ç –¥–∞—Ç—å –∫—Ä–∞—Ç–∫–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –ø–æ–≤—ã—à–µ–Ω–∏–µ

–û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–µ—Å—Ç–∞ –ø–æ –µ–¥–∏–Ω–∏—á–Ω–æ–º—É –ø—Ä–µ–≤—ã—à–µ–Ω–∏—é –ø—Ä–∏–≤–æ–¥–∏—Ç –∫:
- –ù–µ–¥–æ–æ—Ü–µ–Ω–∫–µ —Ä–µ–∞–ª—å–Ω–æ–π –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã
- –ù–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–ø—É—Å–∫–æ–≤
- –°–Ω–∏–∂–µ–Ω–∏—é —Ç–æ—á–Ω–æ—Å—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –†–µ—à–µ–Ω–∏–µ
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –º–µ—Ö–∞–Ω–∏–∑–º **—Å–∫–æ–ª—å–∑—è—â–µ–≥–æ –æ–∫–Ω–∞** –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–∏:

```python
from collections import deque

def __init__(
    self,
    initial_users: int = 10,
    step_multiplier: float = 1.5,
    degradation_threshold: float = 0.7,
    window_size: int = 5,           # –†–∞–∑–º–µ—Ä –æ–∫–Ω–∞ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ N –ø—Ä–æ–≤–µ—Ä–æ–∫)
    threshold_count: int = 3,       # –ú–∏–Ω–∏–º—É–º –ø—Ä–µ–≤—ã—à–µ–Ω–∏–π –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
    ref_metrics: ReferenceMetrics | None = None
):
    # ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

    # –°–∫–æ–ª—å–∑—è—â–µ–µ –æ–∫–Ω–æ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–∏
    self.violation_window: deque[bool] = deque(maxlen=window_size)

def decide(self, metrics: RawMetrics) -> Decision:
    # –†–∞—Å—Å—á–∏—Ç–∞—Ç—å Locust-SDI
    sdi = MetricsCalculator.calculate_locust_sdi(
        curr=metrics,
        prev=self.previous_metrics,
        history=self.metrics_history,
        ref=self.ref_metrics
    )

    # –î–æ–±–∞–≤–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ —Å–∫–æ–ª—å–∑—è—â–µ–µ –æ–∫–Ω–æ
    is_violation = sdi >= self.degradation_threshold
    self.violation_window.append(is_violation)

    # –ü–æ–¥—Å—á–∏—Ç–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞—Ä—É—à–µ–Ω–∏–π –≤ –æ–∫–Ω–µ
    violations_count = sum(self.violation_window)

    # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π
    print(f"üìä Locust-SDI: {sdi:.3f} (–ø–æ—Ä–æ–≥: {self.degradation_threshold}) "
          f"[{violations_count}/{len(self.violation_window)}]")

    # –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π
    if violations_count >= self.threshold_count:
        print(f"üõë –î–µ–≥—Ä–∞–¥–∞—Ü–∏—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞: {violations_count} –∏–∑ "
              f"{len(self.violation_window)} –ø—Ä–æ–≤–µ—Ä–æ–∫ –ø—Ä–µ–≤—ã—Å–∏–ª–∏ –ø–æ—Ä–æ–≥")
        return Decision.STOP

    return Decision.CONTINUE
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```yaml
strategy:
  type: degradation_search
  degradation_threshold: 0.7      # –ü–æ—Ä–æ–≥ Locust-SDI
  window_size: 5                  # –†–∞–∑–º–µ—Ä —Å–∫–æ–ª—å–∑—è—â–µ–≥–æ –æ–∫–Ω–∞
  threshold_count: 3              # –ú–∏–Ω–∏–º—É–º –ø—Ä–µ–≤—ã—à–µ–Ω–∏–π –∏–∑ window_size

orchestrator:
  monitoring_interval: 5          # –ß–∞—Å—Ç–æ—Ç–∞ –ø—Ä–æ–≤–µ—Ä–æ–∫ (—Å–µ–∫—É–Ω–¥—ã)
```

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ü—Ä–∏–º–µ—Ä: `window_size=5`, `threshold_count=3`, `monitoring_interval=5s`**

| –í—Ä–µ–º—è | SDI   | –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ | –û–∫–Ω–æ          | –°—á–µ—Ç—á–∏–∫ | –†–µ—à–µ–Ω–∏–µ    |
|-------|-------|------------|---------------|---------|------------|
| 0s    | 0.45  | ‚ùå         | [F]           | 0/1     | CONTINUE   |
| 5s    | 0.52  | ‚ùå         | [F,F]         | 0/2     | CONTINUE   |
| 10s   | 0.73  | ‚úÖ         | [F,F,T]       | 1/3     | CONTINUE   |
| 15s   | 0.68  | ‚ùå         | [F,F,T,F]     | 1/4     | CONTINUE   |
| 20s   | 0.75  | ‚úÖ         | [F,F,T,F,T]   | 2/5     | CONTINUE   |
| 25s   | 0.81  | ‚úÖ         | [F,T,F,T,T]   | 3/5     | **STOP** ‚úã |

–î–µ–≥—Ä–∞–¥–∞—Ü–∏—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞: **3 –∏–∑ 5** –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ –ø–æ–∫–∞–∑–∞–ª–∏ SDI ‚â• 0.7

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:

‚úÖ **–ó–∞—â–∏—Ç–∞ –æ—Ç –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π** - —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–µ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ø–æ—Ä–æ–≥–∞
‚úÖ **–ì–∏–±–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** - –º–æ–∂–Ω–æ —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∞—Ç—å `window_size` –∏ `threshold_count`
‚úÖ **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å** - –ª–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ** - –µ—Å–ª–∏ —Å–∏—Å—Ç–µ–º–∞ –≤–µ—Ä–Ω—É–ª–∞—Å—å –≤ –Ω–æ—Ä–º—É, —Å—á–µ—Ç—á–∏–∫ —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è
‚úÖ **–°—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω–æ—Å—Ç—å** - —Ä–µ—à–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–∞–Ω–æ –Ω–∞ —Å–µ—Ä–∏–∏ –∏–∑–º–µ—Ä–µ–Ω–∏–π, –∞ –Ω–µ –Ω–∞ –µ–¥–∏–Ω–∏—á–Ω–æ–º –∑–Ω–∞—á–µ–Ω–∏–∏

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

| –°—Ü–µ–Ω–∞—Ä–∏–π | window_size | threshold_count | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-------------|-----------------|----------|
| –ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π | 7 | 5 | –¢—Ä–µ–±—É–µ—Ç—Å—è 5 –∏–∑ 7 –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π (‚âà70%) |
| –°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π | 5 | 3 | –¢—Ä–µ–±—É–µ—Ç—Å—è 3 –∏–∑ 5 –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π (60%) |
| –ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π | 3 | 2 | –¢—Ä–µ–±—É–µ—Ç—Å—è 2 –∏–∑ 3 –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π (‚âà66%) |
| –°—Ç—Ä–æ–≥–∏–π | 1 | 1 | –ë–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π (–∫–∞–∫ –±—ã–ª–æ —Ä–∞–Ω—å—à–µ) |

### –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:

–ü—Ä–∏ `monitoring_interval = 5s`:
- **window_size=5** ‚Üí 25 —Å–µ–∫—É–Ω–¥ –∏—Å—Ç–æ—Ä–∏–∏
- **threshold_count=3** ‚Üí –º–∏–Ω–∏–º—É–º 15 —Å–µ–∫—É–Ω–¥ —Å—Ç–∞–±–∏–ª—å–Ω–æ–π –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–∏ –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–∏—Å—Ç–µ–º–µ "–ø–µ—Ä–µ–∂–¥–∞—Ç—å" –∫—Ä–∞—Ç–∫–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –≤—Å–ø–ª–µ—Å–∫–∏, –Ω–æ –±—ã—Å—Ç—Ä–æ —Å—Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —É—Å—Ç–æ–π—á–∏–≤—É—é –¥–µ–≥—Ä–∞–¥–∞—Ü–∏—é.

---

## 3. –ü—Ä–∏–º–µ—Ä—ã –ª–æ–≥–æ–≤

### –î–æ —É–ª—É—á—à–µ–Ω–∏–π (–Ω–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞):
```
üìä Locust-SDI: 0.353 (–ø–æ—Ä–æ–≥: 0.5)
üìä Locust-SDI: 0.219 (–ø–æ—Ä–æ–≥: 0.5)
üìä Locust-SDI: 0.738 (–ø–æ—Ä–æ–≥: 0.5)  # –í—Ä–µ–º–µ–Ω–Ω—ã–π –≤—Å–ø–ª–µ—Å–∫
üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ! SDI=0.738
STOP  # –¢–µ—Å—Ç –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω–æ!
```

### –ü–æ—Å–ª–µ —É–ª—É—á—à–µ–Ω–∏–π (—Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º):
```
üìä Locust-SDI: 0.353 (–ø–æ—Ä–æ–≥: 0.7) [0/5]
üìä Locust-SDI: 0.219 (–ø–æ—Ä–æ–≥: 0.7) [0/5]
üî¥ Locust-SDI: 0.738 (–ø–æ—Ä–æ–≥: 0.7) [1/5]  # –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω
üìä Locust-SDI: 0.612 (–ø–æ—Ä–æ–≥: 0.7) [0/5]  # –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è - —Å–±—Ä–æ—Å
üìä Locust-SDI: 0.695 (–ø–æ—Ä–æ–≥: 0.7) [0/5]
üî¥ Locust-SDI: 0.753 (–ø–æ—Ä–æ–≥: 0.7) [1/5]
üî¥ Locust-SDI: 0.781 (–ø–æ—Ä–æ–≥: 0.7) [2/5]
üî¥ Locust-SDI: 0.812 (–ø–æ—Ä–æ–≥: 0.7) [3/5]  # –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ!
üõë –î–µ–≥—Ä–∞–¥–∞—Ü–∏—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞: 3 –∏–∑ 5 –ø—Ä–æ–≤–µ—Ä–æ–∫ –ø—Ä–µ–≤—ã—Å–∏–ª–∏ –ø–æ—Ä–æ–≥
STOP
```

---

## 4. –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

–í—Å–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω—ã –ø–æ–¥ –Ω–æ–≤—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É:

### DegradationSearch
- –í—Å—è –ª–æ–≥–∏–∫–∞ –≤ `decide()`: —Ä–∞—Å—á–µ—Ç SDI, –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–∫–æ–ª—å–∑—è—â–µ–≥–æ –æ–∫–Ω–∞
- `get_wait_time() = 30s` - —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ —Ä–∞–∑ –≤ 30 —Å–µ–∫—É–Ω–¥ –¥–ª—è —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏

### BreakPoint
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —É—Å–ª–æ–≤–∏–π –≤ `decide()`: error_rate, RPS, latency
- –ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π —Ä–æ—Å—Ç –Ω–∞–≥—Ä—É–∑–∫–∏ –¥–æ –ø–æ–ª–Ω–æ–≥–æ –æ—Ç–∫–∞–∑–∞

### SLAValidation
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è SLA –≤ `decide()`: P99, error_rate
- –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏ –Ω–∞—Ä—É—à–µ–Ω–∏–∏ –∏–ª–∏ —É—Å–ø–µ—à–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏

### Spike
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–∞–∑–∞–º–∏ (baseline ‚Üí spike ‚Üí recovery) –≤ `decide()`
- `get_wait_time() = 1s` –¥–ª—è –±—ã—Å—Ç—Ä–æ–π —Å–º–µ–Ω—ã —Ñ–∞–∑

---

## –í—ã–≤–æ–¥—ã

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –ø–æ–≤—ã—à–∞—é—Ç:

1. **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - –∑–∞—â–∏—Ç–∞ –æ—Ç –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π
2. **–¢–æ—á–Ω–æ—Å—Ç—å** - –±–æ–ª–µ–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
3. **–ì–∏–±–∫–æ—Å—Ç—å** - –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–∞—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ–¥ —Ä–∞–∑–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
4. **–ü–æ–Ω—è—Ç–Ω–æ—Å—Ç—å** - —á–µ—Ç–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ª–æ–≥–∏–∫–∏
5. **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å** - –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å—Ç–∞–ª–∞ –±–æ–ª–µ–µ —ç–ª–µ–≥–∞–Ω—Ç–Ω–æ–π –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø—É –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ (Single Responsibility Principle).